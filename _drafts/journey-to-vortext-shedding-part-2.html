---
layout: post
---

<p> How I refactored the whole thing for branchless hot loops</p>

<h2>
	Refactoring for branchless hot loop
</h2>

<div class="wasm-canvas__container">
	<fieldset id="cfd-params">
		<legend>Simulation Paramaters</legend>

		<div>
			<label for="field">Field</label>
			<input id="field" name="field" type="text" value="aluminiumTemp" readonly />
		</div>

		<div>
			<label for="field-init">Starting Value</label>
			<input id="field-init" name="field-init" type="number" value="20" readonly />
		</div>

		<fieldset id="bbc">
			<legend>Border Boundary Conditions</legend>

			<fieldset id="north">
				<legend>North Border</legend>
				<div>
					<label for="type">Type</label>
					<select id="type" name="type" readonly>
						<option value="0">Dirichlet</option>
						<option value="1" selected>Neumann</option>
						<option value="2">Outflow</option>
					</select>
				</div>

				<div>
					<label for="value">Value</label>
					<input id="value" name="value" type="number" value="0" readonly />
				</div>
			</fieldset>

			<fieldset id="east">
				<legend>East Border</legend>
				<div>
					<label for="type">Type</label>
					<select id="type" name="type" readonly>
						<option value="0" selected>Dirichlet</option>
						<option value="1">Neumann</option>
						<option value="2">Outflow</option>
					</select>
				</div>

				<div>
					<label for="value">Value</label>
					<input id="value" name="value" type="number" value="0" readonly />
				</div>
			</fieldset>

			<fieldset id="south">
				<legend>South Border</legend>
				<div>
					<label for="type">Type</label>
					<select id="type" name="type" readonly>
						<option value="0">Dirichlet</option>
						<option value="1" selected>Neumann</option>
						<option value="2">Outflow</option>
					</select>
				</div>

				<div>
					<label for="value">Value</label>
					<input id="value" name="value" type="number" value="0" readonly />
				</div>
			</fieldset>

			<fieldset id="west">
				<legend>West Border</legend>
				<div>
					<label for="type">Type</label>
					<select id="type" name="type" readonly>
						<option value="0" selected>Dirichlet</option>
						<option value="1">Neumann</option>
						<option value="2">Outflow</option>
					</select>
				</div>

				<div>
					<label for="value">Value</label>
					<input id="value" name="value" type="number" value="200" readonly />
				</div>
			</fieldset>
		</fieldset>

		<fieldset id="src">
			<legend>Volumetric Source Config</legend>
			<div>
				<label for="magnitude">Volumetric Source Value (W/m^3)</label>
				<input id="magnitude" name="magnitude" type="number" value="5e9" readonly />
			</div>

			<div>
				<label for="x-pos">X Position</label>
				<input id="x-pos" name="x-pos" type="number" value="200" readonly />
			</div>

			<div>
				<label for="y-pos">Y Position</label>
				<input id="y-pos" name="y-pos" type="number" value="200" readonly />
			</div>
		</fieldset>
	</fieldset>
	<canvas id="cfd-canvas" width="800" height="400" class="wasm-canvas"></canvas>
</div>

{% include wasm-loader.html project="cfd-sim-dev" %}
